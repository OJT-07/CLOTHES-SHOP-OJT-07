document.addEventListener("DOMContentLoaded", async () => {
  const urlParams = new URLSearchParams(window.location.search);
  const id = urlParams.get("id");
  const form = document.getElementById("update-product");
  const itemNameInput = document.getElementById("product-name");
  const itemCategoryInput = document.getElementById("product-category");
  const itemPriceInput = document.getElementById("product-price");
  const itemPromotionalPriceInput = document.getElementById(
    "product-promotional-price"
  );
  const itemDescriptionShortInput =
    document.getElementById("short-description");
  //   const itemDescriptionInput = document.getElementById("detail-description");
  const itemQuantityInput = document.getElementById("quantity");
  const itemImageInput = document.getElementById("image");

  // Lấy thông tin item để update

  // Hiển thị thông tin item lên form

  try {
    const response = await fetch(
      `https://json-server-api-i5rh.onrender.com/api/products?id=${id}`
    );
    if (!response.ok) {
      throw new Error("Unable to fetch data");
    }

    const data = await response.json();
    console.log(
      "🚀 ~ file: Update,js:32 ~ document.addEventListener ~ data:",
      data
    );

    // Hiển thị thông tin item lên form
    itemNameInput.value = data.nameProduct;
    // itemDescriptionInput.value = data.description;
    itemImageInput.value = data.image;
    itemQuantityInput.value = data.quantity;
    itemDescriptionShortInput.value = data.shortDescription;
    itemPriceInput.value = data.price;
    itemCategoryInput.value = data.nameCategory;
    itemPromotionalPriceInput.value = data.promotionalPrice;
    // Các trường thông tin khác của item...
  } catch (error) {
    console.error("Error:", error);
  }

  // Xử lý sự kiện submit form
  //   form.addEventListener("submit", (event) => {
  //     event.preventDefault();
  //     const updatedItem = {
  //       name: itemNameInput.value,
  //       description: itemDescriptionInput.value,
  //     };
  //     // Gửi thông tin item cập nhật qua API
  //     fetch(`https://json-server-api-i5rh.onrender.com/api/products?id=${id}`),
  //       {
  //         // Thay đổi URL API và ID item cần update
  //         method: "PUT",
  //         headers: {
  //           "Content-Type": "application/json",
  //         },
  //         body: JSON.stringify(updatedItem),
  //       }
  //         .then((response) => response.json())
  //         .then((data) => {
  //           console.log("Item updated:", data);
  //           // Xử lý sau khi cập nhật thành công
  //         })
  //         .catch((error) => console.error("Error:", error));
  //   });
});
