document.addEventListener("DOMContentLoaded", async () => {
  const urlParams = new URLSearchParams(window.location.search);
  const id = urlParams.get("id");
  const form = document.getElementById("update-product");
  const itemNameInput = document.getElementById("product-name");
  const itemCategoryInput = document.getElementById("product-category");
  const itemPriceInput = document.getElementById("product-price");
  const itemPromotionalPriceInput = document.getElementById(
    "product-promotional-price"
  );
  const itemDescriptionShortInput =
    document.getElementById("short-description");
  //   const itemDescriptionInput = document.getElementById("detail-description");
  const itemQuantityInput = document.getElementById("quantity");
  const itemImageInput = document.getElementById("image");

  // Láº¥y thÃ´ng tin item Ä‘á»ƒ update

  // Hiá»ƒn thá»‹ thÃ´ng tin item lÃªn form

  try {
    const response = await fetch(
      `https://json-server-api-i5rh.onrender.com/api/products?id=${id}`
    );
    if (!response.ok) {
      throw new Error("Unable to fetch data");
    }

    const data = await response.json();
    console.log(
      "ðŸš€ ~ file: Update,js:32 ~ document.addEventListener ~ data:",
      data
    );

    // Hiá»ƒn thá»‹ thÃ´ng tin item lÃªn form
    itemNameInput.value = data.nameProduct;
    // itemDescriptionInput.value = data.description;
    itemImageInput.value = data.image;
    itemQuantityInput.value = data.quantity;
    itemDescriptionShortInput.value = data.shortDescription;
    itemPriceInput.value = data.price;
    itemCategoryInput.value = data.nameCategory;
    itemPromotionalPriceInput.value = data.promotionalPrice;
    // CÃ¡c trÆ°á»ng thÃ´ng tin khÃ¡c cá»§a item...
  } catch (error) {
    console.error("Error:", error);
  }

  // Xá»­ lÃ½ sá»± kiá»‡n submit form
  //   form.addEventListener("submit", (event) => {
  //     event.preventDefault();
  //     const updatedItem = {
  //       name: itemNameInput.value,
  //       description: itemDescriptionInput.value,
  //     };
  //     // Gá»­i thÃ´ng tin item cáº­p nháº­t qua API
  //     fetch(`https://json-server-api-i5rh.onrender.com/api/products?id=${id}`),
  //       {
  //         // Thay Ä‘á»•i URL API vÃ  ID item cáº§n update
  //         method: "PUT",
  //         headers: {
  //           "Content-Type": "application/json",
  //         },
  //         body: JSON.stringify(updatedItem),
  //       }
  //         .then((response) => response.json())
  //         .then((data) => {
  //           console.log("Item updated:", data);
  //           // Xá»­ lÃ½ sau khi cáº­p nháº­t thÃ nh cÃ´ng
  //         })
  //         .catch((error) => console.error("Error:", error));
  //   });
});
